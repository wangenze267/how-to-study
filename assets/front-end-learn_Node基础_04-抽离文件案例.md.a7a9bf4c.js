import{_ as n,c as s,o as a,d as t}from"./app.20b88978.js";const f='{"title":"\u62BD\u79BBhtml\u6587\u4EF6","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u62BD\u79BBhtml\u6587\u4EF6","slug":"\u62BD\u79BBhtml\u6587\u4EF6"},{"level":3,"title":"\u521B\u5EFA\u6B63\u5219","slug":"\u521B\u5EFA\u6B63\u5219"},{"level":3,"title":"\u8BFB\u53D6\u6587\u4EF6","slug":"\u8BFB\u53D6\u6587\u4EF6"},{"level":3,"title":"\u5199\u5165\u6837\u5F0F","slug":"\u5199\u5165\u6837\u5F0F"},{"level":3,"title":"\u5199\u5165\u811A\u672C","slug":"\u5199\u5165\u811A\u672C"},{"level":3,"title":"\u5199\u5165\u6587\u6863","slug":"\u5199\u5165\u6587\u6863"}],"relativePath":"front-end-learn/Node\u57FA\u7840/04-\u62BD\u79BB\u6587\u4EF6\u6848\u4F8B.md"}',p={},e=t(`<h2 id="\u62BD\u79BBhtml\u6587\u4EF6" tabindex="-1">\u62BD\u79BBhtml\u6587\u4EF6 <a class="header-anchor" href="#\u62BD\u79BBhtml\u6587\u4EF6" aria-hidden="true">#</a></h2><h3 id="\u521B\u5EFA\u6B63\u5219" tabindex="-1">\u521B\u5EFA\u6B63\u5219 <a class="header-anchor" href="#\u521B\u5EFA\u6B63\u5219" aria-hidden="true">#</a></h3><ol><li><p>\u5BFC\u5165\u6240\u9700</p><div class="language-js"><pre><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>\u6B63\u5219\u5339\u914D</p><p>\\s\u8868\u793A\u7A7A\u767D\u5B57\u7B26\uFF0C\\S\u8868\u793A\u975E\u7A7A\u767D\u5B57\u7B26\uFF0C*\u8868\u793A\u5339\u914D\u4EFB\u610F\u6B21</p><div class="language-js"><pre><code><span class="token keyword">const</span> regStyle <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;style&gt;[\\s\\S]*&lt;\\/style&gt;</span><span class="token regex-delimiter">/</span></span>
<span class="token keyword">const</span> regScript <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;script&gt;[\\s\\S]*&lt;\\/script&gt;</span><span class="token regex-delimiter">/</span></span>
</code></pre></div></li></ol><h3 id="\u8BFB\u53D6\u6587\u4EF6" tabindex="-1">\u8BFB\u53D6\u6587\u4EF6 <a class="header-anchor" href="#\u8BFB\u53D6\u6587\u4EF6" aria-hidden="true">#</a></h3><p>\u4F7F\u7528fs\u548Cpath\u6A21\u5757\u6765\u8BFB\u53D6index.html\u6587\u4EF6</p><div class="language-js"><pre><code>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&#39;../file/index.html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;utf8&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>dataStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>  <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u6587\u4EF6\u8BFB\u53D6\u5931\u8D25&#39;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token function">resolveCSS</span><span class="token punctuation">(</span>dataStr<span class="token punctuation">)</span>
    <span class="token function">resolveJS</span><span class="token punctuation">(</span>dataStr<span class="token punctuation">)</span>
    <span class="token function">resolveHTML</span><span class="token punctuation">(</span>dataStr<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="\u5199\u5165\u6837\u5F0F" tabindex="-1">\u5199\u5165\u6837\u5F0F <a class="header-anchor" href="#\u5199\u5165\u6837\u5F0F" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">resolveCSS</span><span class="token punctuation">(</span><span class="token parameter">htmlStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//1.\u5339\u914D\u5230style\u4E2D\u5185\u5BB9</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> regStyle<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>htmlStr<span class="token punctuation">)</span>
    <span class="token comment">//2.\u56E0\u4E3Aa\u4E3A\u63D0\u53D6\u51FA\u6765\u7684\u6570\u7EC4\uFF0C\u4E14\u4E0B\u6807\u7B2C\u4E00\u4F4D\u4E3A\u5339\u914D\u5230\u7684\u6587\u672C\uFF0C\u5305\u542Bstyle\u5F00\u59CB\u548C\u7ED3\u675F\u6807\u7B7E\uFF0C\u4E4B\u540E\u4F7F\u7528replace\u8FDB\u884C\u66FF\u6362\u3002</span>
    <span class="token keyword">const</span> neewCSS <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;style&gt;&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;/style&gt;&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
    <span class="token comment">//\u5199\u5165css\u5230index.css\u4E2D</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;__dirnme&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;./file/index.css&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>newCSS<span class="token punctuation">,</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u5199\u5165\u5931\u8D25&#39;</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u5199\u5165\u6210\u529F&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="\u5199\u5165\u811A\u672C" tabindex="-1">\u5199\u5165\u811A\u672C <a class="header-anchor" href="#\u5199\u5165\u811A\u672C" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">resolveJS</span><span class="token punctuation">(</span><span class="token parameter">htmlStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//1.\u5339\u914D\u5230script\u4E2D\u5185\u5BB9</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> regScript<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>htmlStr<span class="token punctuation">)</span>
    <span class="token comment">//2.\u56E0\u4E3Aa\u4E3A\u63D0\u53D6\u51FA\u6765\u7684\u6570\u7EC4\uFF0C\u4E14\u4E0B\u6807\u7B2C\u4E00\u4F4D\u4E3A\u5339\u914D\u5230\u7684\u6587\u672C\uFF0C\u5305\u542Bstyle\u5F00\u59CB\u548C\u7ED3\u675F\u6807\u7B7E\uFF0C\u4E4B\u540E\u4F7F\u7528replace\u8FDB\u884C\u66FF\u6362\u3002</span>
    <span class="token keyword">const</span> neewJS <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;script&gt;&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;/script&gt;&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
    <span class="token comment">//\u5199\u5165css\u5230index.js\u4E2D</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;__dirnme&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;./file/index.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>newJS<span class="token punctuation">,</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u5199\u5165\u5931\u8D25&#39;</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u5199\u5165\u6210\u529F&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="\u5199\u5165\u6587\u6863" tabindex="-1">\u5199\u5165\u6587\u6863 <a class="header-anchor" href="#\u5199\u5165\u6587\u6863" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">resolveHTML</span><span class="token punctuation">(</span><span class="token parameter">htmlStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5339\u914D\u66FF\u6362\u76F8\u5BF9\u8DEF\u5F84</span>
    <span class="token keyword">const</span> newHTML <span class="token operator">=</span> htmlStr
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regStyle <span class="token punctuation">,</span><span class="token string">&#39;&lt;link href=&quot;./index.css&quot;&gt;&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regScript<span class="token string">&#39;&lt;script src=&quot;./index.js&quot;&gt;&lt;/script&gt;&#39;</span><span class="token punctuation">)</span>
    <span class="token comment">//\u5199\u5165css\u5230index.html\u4E2D</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;__dirnme&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;./file/index.html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>newHTML<span class="token punctuation">,</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u5199\u5165\u5931\u8D25&#39;</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u5199\u5165\u6210\u529F&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>`,12),o=[e];function c(l,u,i,k,r,d){return a(),s("div",null,o)}var h=n(p,[["render",c]]);export{f as __pageData,h as default};
